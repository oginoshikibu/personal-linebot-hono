# 家庭用食事管理LINEボット 要件定義書

## 1. 概要
家庭での食事予定を管理するためのLINEボットです。家族メンバーが各食事に参加するかどうか、食事の準備方法などを管理し、定期的に確認メッセージを送信します。

## 2. 対象ユーザー
- 家族メンバー2名のみ
- 登録済みLINE IDのみが利用可能
- 未登録のIDからのメッセージには応答しない

## 3. 機能要件

### 3.1 主要機能

#### 食事参加管理
- 各メンバーが昼食・夕食に参加するかどうかを登録
- 状態: 参加する/参加しない

#### 食事準備方法管理
- 各食事の準備方法を登録
- 選択肢:
  - 自炊（作る人を指定）
  - 各自自由に食べる
  - 買って一緒に食べる

#### 定期通知
- 夜22時: 翌日の昼食・夕食の予定確認
- 朝7時: 当日の予定再確認

#### 予定変更機能
- リッチメニューから変更操作を選択
- 変更時は他のメンバーに通知

### 3.2 オプション機能
- 月間の食事統計情報
- 自炊回数、外食回数などのレポート

## 4. 非機能要件

### 4.1 セキュリティ
- 登録済みLINE IDのみアクセス可能
- 環境変数による認証情報の管理
- Zodによる入力値バリデーション

### 4.2 パフォーマンス
- 応答時間: 3秒以内
- 24時間稼働

### 4.3 データ管理
- 開発環境: SQLiteによるローカルデータストレージ
- 本番環境: MySQLによるデータストレージ
- Prisma ORMによる型安全なデータベースアクセス
- バックアップ: 特に要件なし（データ消失は許容）

## 5. ユーザーインターフェース

### リッチメニュー構成
- 今日の予定
- 明日の予定
- 今週の予定
- 今後の予定

### 実装済み機能
- カレンダー表示機能
- Flexメッセージによるリッチな表示
- ポストバック処理による操作
- コマンドライン形式の操作も対応

### 操作フロー
1. 予定確認・編集
   - 日付選択
   - 食事タイプ選択 (昼食/夕食)
   - 参加有無選択
   - 準備方法選択
   - 確認・保存

## 6. 通知メッセージ例

### 夜の確認メッセージ
```
【明日の食事予定確認】
◆ 昼食
太郎: 参加
花子: 不参加
準備: 太郎が作る

◆ 夕食
太郎: 参加
花子: 参加
準備: 買って一緒に食べる

予定を変更する場合はメニューから「予定変更」を選択してください。
```

### 朝の確認メッセージ
```
【本日の食事予定】
◆ 昼食
太郎: 参加
花子: 不参加
準備: 太郎が作る

◆ 夕食
太郎: 参加
花子: 参加
準備: 買って一緒に食べる

予定を変更する場合はメニューから「予定変更」を選択してください。
```

## 7. 制約事項

- 家族メンバー最大2名まで
- 食事タイプは昼食・夕食のみ
- 当日・翌日の予定変更時のみ他メンバーに通知
- 週間予定入力は日曜夜のリマインダーで対応

## 8. 関連ドキュメント

- [アーキテクチャ設計](domain_model.md) - 詳細な技術仕様
- [データベース設計](er_diagram.md) - データモデルとER図
- [ユーザーフロー](user_flow.md) - 操作フローの詳細 