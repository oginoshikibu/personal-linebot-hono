# 家庭用食事管理LINEボット 要件定義書

## 1. 概要
家庭での食事予定を管理するためのLINEボットです。家族メンバーが各食事に参加するかどうか、食事の準備方法などを管理し、定期的に確認メッセージを送信します。

## 2. ユーザー
- 家族メンバー2名のみ
- 登録済みLINE IDのみが利用可能
- 未登録のIDからのメッセージには応答しない

## 3. 機能要件

### 3.1 コア機能
1. **食事参加管理**
   - 各メンバーが昼食・夕食に参加するかどうかを登録
   - 状態: 参加する/参加しない

2. **食事準備方法管理**
   - 各食事の準備方法を登録
   - 選択肢:
     - 自炊（作る人を指定）
     - 各自自由に食べる
     - 買って一緒に食べる

3. **定期通知**
   - 夜22時: 翌日の昼食・夕食の予定確認
   - 朝7時: 当日の予定再確認

4. **予定変更機能**
   - メニューから変更操作を選択
   - 変更時は他のメンバーに通知

### 3.2 オプション機能
1. **レポート機能**
   - 月間の食事統計情報
   - 自炊回数、外食回数など

## 4. 非機能要件

### 4.1 セキュリティ
- 登録済みLINE IDのみアクセス可能

### 4.2 パフォーマンス
- 応答時間: 3秒以内

### 4.3 可用性
- 24時間稼働
- バックアップ: 特に要件なし（データ消失は許容）

## 5. 技術スタック
- フレームワーク: Hono
- データベース: SQLite (Prisma ORM)
- インフラ: AWS EC2 (小規模インスタンス)
- CI/CD: GitHub Actions
- 外部API: LINE Messaging API

## 6. システム構成
- EC2インスタンス上にアプリケーションとデータベースを配置
- Terraformによるインフラ構成管理
- GitHub Actionsによる自動デプロイ

## 7. データモデル (概要)

### ユーザー
- ID
- LINE ID
- 名前
- 作成日時

### 食事予定
- ID
- 日付
- 食事タイプ (昼食/夕食)
- 準備方法
- 作る人 (自炊の場合)
- 作成日時
- 更新日時

### 食事参加
- ID
- 食事予定ID
- ユーザーID
- 参加状態 (参加/不参加)
- 作成日時
- 更新日時

## 8. ユーザーインターフェース

### メインメニュー
- 予定登録
- 予定変更
- 予定確認
- レポート表示 (オプション)

### 操作フロー
1. 予定登録/変更
   - 日付選択
   - 食事タイプ選択 (昼食/夕食)
   - 参加有無選択
   - 準備方法選択
   - 確認

## 9. 通知メッセージ例

### 夜の確認メッセージ
```
【明日の食事予定確認】
◆ 昼食
太郎: 参加
花子: 不参加
準備: 太郎が作る

◆ 夕食
太郎: 参加
花子: 参加
準備: 買って一緒に食べる

予定を変更する場合はメニューから「予定変更」を選択してください。
```

### 朝の確認メッセージ
```
【本日の食事予定】
◆ 昼食
太郎: 参加
花子: 不参加
準備: 太郎が作る

◆ 夕食
太郎: 参加
花子: 参加
準備: 買って一緒に食べる

予定を変更する場合はメニューから「予定変更」を選択してください。
```

## 10. 開発スケジュール
1. 環境構築・基本設計
2. データベース設計・実装
3. LINE Bot基本機能実装
4. 定期通知機能実装
5. UI/UX調整
6. テスト
7. デプロイ
8. オプション機能実装 